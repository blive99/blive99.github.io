<!doctype html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FUCKIDPLUS3.0 IPTV Player</title>
  <style>
    :root{--bg:#0f1724;--card:#111827;--muted:#9ca3af;--accent:#ff7a00;--glass:rgba(255,255,255,0.03)}
    html,body{height:100%;margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans", "Helvetica Neue", Arial}
    body{background:linear-gradient(180deg,#071021 0%, #071321 60%);color:#fff}
    header{display:flex;align-items:center;justify-content:center;padding:18px 12px}
    .brand{font-weight:800;font-size:20px;color:var(--accent);text-align:center;letter-spacing:2px}

    .app{display:grid;grid-template-columns:260px 1fr;gap:18px;padding:12px;max-width:1200px;margin:0 auto}

    /* sidebar */
    .sidebar{background:var(--card);padding:12px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    .sidebar h3{margin:0 0 8px 0;font-size:14px;color:var(--muted)}
    .categories{display:flex;flex-direction:column;gap:8px}
    .cat{padding:8px 10px;border-radius:8px;cursor:pointer;background:var(--glass);font-size:14px}
    .cat.active{background:linear-gradient(90deg,rgba(255,122,0,0.12),rgba(255,122,0,0.06));border:1px solid rgba(255,122,0,0.12)}

    /* main */
    .main{display:flex;flex-direction:column;gap:12px}
    .player-wrap{background:var(--card);padding:12px;border-radius:12px}
    video{width:100%;height:420px;max-height:65vh;background:#000;border-radius:8px}
    .controls{display:flex;gap:10px;align-items:center;margin-top:10px}
    .input,select,button{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:#fff}
    .input{flex:1}
    .btn{background:linear-gradient(90deg,var(--accent),#ff9b3b);border:none;color:#000;font-weight:700}

    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:12px}
    .card{background:var(--card);padding:8px;border-radius:10px;overflow:hidden;cursor:pointer}
    .thumb{height:100px;border-radius:6px;background:#0b1220;display:flex;align-items:center;justify-content:center;font-size:12px;color:var(--muted)}
    .title{margin-top:8px;font-weight:600;font-size:13px}
    .meta{font-size:12px;color:var(--muted)}

    .topbar{display:flex;justify-content:space-between;align-items:center}

    /* mobile */
    @media (max-width:900px){.app{grid-template-columns:1fr;}.sidebar{order:2}}
  </style>
</head>
<body>
  <header>
    <div class="brand">KIXK STREAM</div>
  </header>

  <div class="app">
    <aside class="sidebar">
      <h3>‡πÄ‡∏°‡∏ô‡∏π‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</h3>
      <div class="categories" id="categories"></div>
      <hr style="border:none;margin:10px 0;border-top:1px solid rgba(255,255,255,0.03)">
      <button id="toggleList" class="input">‡∏ã‡πà‡∏≠‡∏ô/‡πÅ‡∏™‡∏î‡∏á ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏≠‡∏á</button>
      <div style="height:8px"></div>
      <div>
        <small class="meta">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á (‡∏ã‡πà‡∏≠‡∏ô‡πÑ‡∏î‡πâ)</small>
        <div style="display:flex;gap:6px;margin-top:6px">
          <input id="newTitle" class="input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏≠‡∏á" />
        </div>
        <div style="display:flex;gap:6px;margin-top:6px">
          <input id="newUrl" class="input" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå (m3u8 / mp4 / mpd)" />
        </div>
        <div style="display:flex;gap:6px;margin-top:6px">
          <select id="newGroup" class="input">
            <option>üì∫ ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ</option>
            <option>üì∫ ‡∏Å‡∏µ‡∏¨‡∏≤</option>
            <option>üé¨ ‡∏´‡∏ô‡∏±‡∏á</option>
            <option>üßí ‡πÄ‡∏î‡πá‡∏Å</option>
            <option>üì∞ ‡∏Ç‡πà‡∏≤‡∏ß</option>
          </select>
        </div>
        <div style="display:flex;gap:6px;margin-top:8px">
          <button id="addBtn" class="btn">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á</button>
        </div>
      </div>
    </aside>

    <main class="main">
      <div class="player-wrap">
        <div class="topbar">
          <div style="display:flex;align-items:center;gap:12px">
            <strong id="playingTitle">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÄ‡∏•‡πà‡∏ô</strong>
            <span class="meta" id="playingGroup"></span>
          </div>
          <div>
            <button id="loginBtn" class="input">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
          </div>
        </div>

        <video id="video" controls playsinline></video>

        <div class="controls">
          <input id="directUrl" class="input" placeholder="‡∏ß‡∏≤‡∏á‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏ï‡∏£‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà ‡πÅ‡∏•‡πâ‡∏ß‡∏Å‡∏î Play" />
          <input id="decKey" class="input" placeholder="‡πÉ‡∏™‡πà key (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)" style="max-width:260px" />
          <button id="playDirect" class="btn">Play</button>
        </div>
      </div>

      <div>
        <h3 class="meta">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏≠‡∏á</h3>
        <div id="channelsGrid" class="grid"></div>
      </div>
    </main>
  </div>

  <!-- login modal (simple) -->
  <div id="modal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6)">
    <div style="background:var(--card);padding:18px;border-radius:10px;min-width:320px">
      <h3>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h3>
      <input id="user" class="input" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ/‡∏≠‡∏µ‡πÄ‡∏°‡∏•" style="margin-top:8px" />
      <input id="pass" type="password" class="input" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" style="margin-top:8px" />
      <div style="display:flex;gap:8px;margin-top:12px;justify-content:flex-end">
        <button id="closeModal" class="input">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
        <button id="doLogin" class="btn">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
      </div>
    </div>
  </div>

  <!-- include hls.js and dash.js from CDN -->
  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script src="https://cdn.dashjs.org/latest/dash.all.min.js"></script>

  <script>
    // Sample channels - user can replace with their own or extend
    const channels = [
      { title: 'Demo HLS (WWE)', url: 'https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8', group: 'üì∫ ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ', logo: '' , hidden:false},
      { title: 'Demo MP4 Movie', url: 'https://www.w3schools.com/html/mov_bbb.mp4', group: 'üé¨ ‡∏´‡∏ô‡∏±‡∏á', logo:'', hidden:false},
      { title: 'Demo DASH', url: 'https://dash.akamaized.net/envivio/EnvivioDash3/manifest.mpd', group: 'üì∫ ‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ',logo:'', hidden:false},
    ];

    const categories = [...new Set(channels.map(c=>c.group))];
    const catContainer = document.getElementById('categories');
    const grid = document.getElementById('channelsGrid');
    const video = document.getElementById('video');
    const playingTitle = document.getElementById('playingTitle');
    const playingGroup = document.getElementById('playingGroup');

    function renderCategories(){
      catContainer.innerHTML = '';
      const all = document.createElement('div');
      all.className='cat active'; all.innerText='‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î'; all.onclick=()=>{filterBy(null, all)};
      catContainer.appendChild(all);
      [...new Set(channels.map(c=>c.group))].forEach(g=>{
        const el=document.createElement('div');el.className='cat';el.innerText=g;el.onclick=()=>filterBy(g, el);catContainer.appendChild(el);
      })
    }

    let currentFilter = null;
    function filterBy(group, el){
      currentFilter = group;document.querySelectorAll('.cat').forEach(x=>x.classList.remove('active'));el.classList.add('active');renderGrid();
    }

    function renderGrid(){
      grid.innerHTML='';
      channels.filter(c=>!c.hidden).filter(c=>currentFilter?c.group===currentFilter:true).forEach((ch, idx)=>{
        const card=document.createElement('div');card.className='card';
        const thumb=document.createElement('div');thumb.className='thumb';thumb.innerText=ch.title;
        const title=document.createElement('div');title.className='title';title.innerText=ch.title;
        const meta=document.createElement('div');meta.className='meta';meta.innerText=ch.group;
        card.appendChild(thumb);card.appendChild(title);card.appendChild(meta);
        card.onclick=()=>playChannel(idx);
        grid.appendChild(card);
      })
    }

    // Player logic - supports m3u8 via hls.js, MP4 via native, and DASH via dash.js
    let hls=null; let dashPlayer=null;
    function stopPlayers(){
      if(hls){try{hls.destroy();}catch(e){}hls=null}
      if(dashPlayer){try{dashPlayer.reset();}catch(e){}dashPlayer=null}
      video.pause(); video.removeAttribute('src'); video.load();
    }

    function playChannel(idx){
      const ch = channels[idx];
      playUrl(ch.url, ch.title, ch.group);
    }

    function playUrl(url, title, group){
      stopPlayers();
      playingTitle.innerText = title || url;
      playingGroup.innerText = group || '';
      // if dash
      if(url.endsWith('.mpd')){
        dashPlayer = dashjs.MediaPlayer().create();
        dashPlayer.initialize(video, url, true);
        return;
      }
      // if mp4 or webm - native
      if(url.match(/\.(mp4|webm|ogg)(\?|$)/i)){
        video.src = url; video.play(); return;
      }
      // assume HLS
      if(Hls.isSupported()){
        hls = new Hls();
        hls.loadSource(url);
        hls.attachMedia(video);
        hls.on(Hls.Events.MANIFEST_PARSED, ()=>video.play());
        hls.on(Hls.Events.ERROR, function(event, data){console.warn('HLS error', data);});
      } else if(video.canPlayType('application/vnd.apple.mpegurl')){
        video.src = url; video.play();
      } else {
        alert('‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏≤‡∏à‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡πà‡∏ô HLS');
      }
    }

    // direct play button
    document.getElementById('playDirect').addEventListener('click', ()=>{
      const url = document.getElementById('directUrl').value.trim();
      const key = document.getElementById('decKey').value.trim();
      if(!url){alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå');return}
      // NOTE: inserting keys for DRM/encryption usually requires license servers and platform DRM stack.
      if(key){console.log('received key (placeholder):', key)}
      playUrl(url, url, 'Direct');
    })

    // add new channel
    document.getElementById('addBtn').addEventListener('click', ()=>{
      const t = document.getElementById('newTitle').value.trim();
      const u = document.getElementById('newUrl').value.trim();
      const g = document.getElementById('newGroup').value;
      if(!t || !u){alert('‡πÇ‡∏õ‡∏£‡∏î‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏•‡∏∞‡∏•‡∏¥‡∏á‡∏Å‡πå');return}
      channels.push({title:t,url:u,group:g,hidden:true});
      document.getElementById('newTitle').value='';document.getElementById('newUrl').value='';
      renderGrid();
      alert('‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ä‡πà‡∏≠‡∏á (‡∏ã‡πà‡∏≠‡∏ô) ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢ ‚Äî ‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏™‡∏î‡∏á‡∏ä‡πà‡∏≠‡∏á‡∏´‡∏£‡∏∑‡∏≠‡∏ï‡∏±‡∏î‡∏ï‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢‡πÇ‡∏Ñ‡πâ‡∏î');
    })

    document.getElementById('toggleList').addEventListener('click', ()=>{
      const hidden = grid.style.display==='none';
      grid.style.display = hidden ? 'grid' : 'none';
    })

    // login modal
    document.getElementById('loginBtn').addEventListener('click', ()=>document.getElementById('modal').style.display='flex');
    document.getElementById('closeModal').addEventListener('click', ()=>document.getElementById('modal').style.display='none');
    document.getElementById('doLogin').addEventListener('click', ()=>{alert('‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ö‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•');document.getElementById('modal').style.display='none'})

    // initial render
    renderCategories(); renderGrid();
  </script>
</body>
</html>
