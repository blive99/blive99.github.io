<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <title>IPTV THAILAND</title>
  <link href="https://vjs.zencdn.net/7.21.0/video-js.css" rel="stylesheet" />
  <style>
    body { background:#0f0f10; color:#eee; font-family:system-ui,sans-serif; margin:0; }
    header { background:#111; padding:12px; text-align:center; border-bottom:1px solid #222; }
    h1 { margin:0; font-size:18px; }
    #container { max-width:1100px; margin:16px auto; padding:0 12px; }
    #player { max-width:1000px; margin:12px auto; }
    .channel-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(220px,1fr)); gap:14px; margin-top:14px; }
    .card { background:#121217; border:1px solid #232329; border-radius:10px; overflow:hidden; cursor:pointer; transition:transform .15s; }
    .card:hover { transform:translateY(-5px); }
    .thumb { width:100%; height:120px; object-fit:cover; background:#000; }
    .card-body { padding:10px; text-align:center; }
    .logo { height:30px; display:block; margin:0 auto 6px; object-fit:contain; }
    .ch-name { font-size:14px; font-weight:500; }
    .meta { font-size:12px; color:#bbb; margin-top:4px; }
  </style>
</head>
<body>
  <header><h1>ðŸ“º IPTV THAILAND</h1></header>
  <div id="container">
    <div id="player">
      <video id="video" class="video-js vjs-default-skin" controls preload="auto"></video>
    </div>
    <div id="channelGrid" class="channel-grid"></div>
  </div>

  <script src="https://vjs.zencdn.net/7.21.0/video.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/videojs-contrib-eme@3.8.0/dist/videojs-contrib-eme.min.js"></script>

  <script>
    const channels = [
      {
        name: "3HD",
        src: "https://udn-streamer1.cdn.3bbtv.com:8443/3bb/live/33/33.mpd",
        type: "application/dash+xml",
        logo: "https://gigatv.3bbtv.co.th/wp-content/themes/changwattana/assets/channel/33.png",
        clearkeys: { "9d76aea451d441a4913d4d70c4e586ab": "051027a6ff54494b949ba792928e9008" }
      },
      {
        name: "JKN 18",
        src: "https://udn-streamer1.cdn.3bbtv.com:8443/3bb/live/18/18.mpd",
        type: "application/dash+xml",
        logo: "https://gigatv.3bbtv.co.th/wp-content/themes/changwattana/assets/channel/18.png",
        clearkeys: { "333de6034a1d45fe91c829539caf1149": "2710efc048ca44bba4c2b57397989a26" }
      },
      {
        name: "ThaiPBS",
        src: "https://thaipbs-live.cdn.byteark.com/live/playlist.m3u8",
        type: "application/x-mpegURL",
        logo: "https://58-64-52-73-rewriter.ais-vidnt.com/ais/play/origin/LIVE//channelicon/0014.png",
      },
          {
        name: "PPTV HD 36",
        src: "https://udn-streamer1.cdn.3bbtv.com:8443/3bb/live/36/36.mpd",
        type: "application/dash+xml",
        logo: "https://58-64-52-73-rewriter.ais-vidnt.com/ais/play/origin/LIVE/channelicon/R_0022.png",
        clearkeys: { "0aeffa7753674e77b99443fac7757b8a": "b8c8a462008a40aa91823e0b02e8dd31" } 
      },

    ];

    const player = videojs('video', { fluid:true, autoplay:false });

    function renderChannels() {
      const grid = document.getElementById('channelGrid');
      grid.innerHTML = '';
      channels.forEach((ch, idx) => {
        const card = document.createElement('div');
        card.className = 'card';
        card.onclick = () => playChannel(idx);

        const thumb = document.createElement('img');
        thumb.className = 'thumb';
        thumb.src = ch.thumb || ch.logo;
        thumb.alt = ch.name;

        const body = document.createElement('div');
        body.className = 'card-body';

        const logo = document.createElement('img');
        logo.className = 'logo';
        logo.src = ch.logo;

        const name = document.createElement('div');
        name.className = 'ch-name';
        name.textContent = ch.name;

        const meta = document.createElement('div');
        meta.className = 'meta';
        meta.textContent = ch.type.includes("dash") ? "MPEG-DASH" : "HLS";

        body.appendChild(logo);
        body.appendChild(name);
        body.appendChild(meta);
        card.appendChild(thumb);
        card.appendChild(body);
        grid.appendChild(card);
      });
    }

    function playChannel(idx) {
      const ch = channels[idx];
      player.reset();
      let keySystemOptions = [];
      if (ch.clearkeys) {
        keySystemOptions = [{
          name: 'org.w3.clearkey',
          options: { clearkeys: ch.clearkeys }
          name: 'org.w3.clearkey',
          options: { clearkeys: ch.clearkeys }
          name: 'org.w3.clearkey',
          options: { clearkeys: ch.clearkeys }
        }];
      }
      player.src({ src: ch.src, type: ch.type, keySystemOptions });
      player.play().catch(e => console.warn("Auto-play blocked:", e));
    }

    renderChannels();
  </script>
</body>
</html>
